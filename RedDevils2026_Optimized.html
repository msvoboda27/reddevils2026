<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî¥ Red Devils 2026 ‚Äî Draft Room</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
:root{
  --bg:#eae3d8;--surface:#e0d9cc;--card:#f2ece2;--card2:#f9f5ef;
  --border:#cfc8b6;--border2:#bbb29e;
  --red:#c01e2c;--red2:#d42838;--red-dim:rgba(192,30,44,.08);
  --gold:#9e5e0c;--gold2:#b87018;--gold-dim:rgba(158,94,12,.08);--gold-b:#a86810;
  --green:#1a6835;--green-dim:rgba(26,104,53,.08);
  --blue:#1a4a8a;--blue-dim:rgba(26,74,138,.07);
  --orange:#b84c0e;--purple:#6a3a8a;
  --text:#1a140e;--text2:#36291e;--sub:#6a5a48;--muted:#b8b09e;
  --label:#887668;--label2:#786658;
  --ticker-h:37px;
  --hdr-h:88px;--nav-h:44px;--row-h:52px;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;overflow:hidden;}
body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;display:flex;flex-direction:column;font-size:14px;}

/* TICKER */
.ticker{height:var(--ticker-h);background:var(--card2);display:flex;align-items:stretch;
  flex-shrink:0;border-bottom:2px solid var(--border);box-shadow:0 2px 8px rgba(0,0,0,.06);}
.t-live{background:var(--red);color:#fff;display:flex;align-items:center;padding:0 14px;
  font-size:9px;font-weight:900;letter-spacing:3px;text-transform:uppercase;gap:7px;flex-shrink:0;
  border-right:1px solid rgba(255,255,255,.2);min-width:68px;}
.t-live::before{content:'';width:6px;height:6px;background:#fff;border-radius:50%;animation:blink 1.2s infinite;flex-shrink:0;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}
.t-items{display:flex;flex:1;overflow:hidden;}
.ti{display:flex;align-items:center;gap:7px;padding:0 14px;border-right:1px solid var(--border);flex-shrink:0;}
.ti-k{color:var(--label);font-size:9px;letter-spacing:1.5px;text-transform:uppercase;font-weight:700;white-space:nowrap;}
.ti-v{color:var(--text2);font-weight:700;font-size:13px;white-space:nowrap;}
.ti-v.hot{color:var(--red);font-weight:800;}
.ti-v.warn{color:var(--orange);font-weight:700;}
.ti-v.you{color:var(--gold2);font-weight:800;}

/* HEADER */
.header{height:var(--hdr-h);flex-shrink:0;background:var(--card2);border-bottom:3px solid var(--red);
  display:grid;grid-template-columns:auto 1fr auto;align-items:center;padding:0 20px;gap:14px;
  box-shadow:0 2px 12px rgba(0,0,0,.07);}
.h-brand{display:flex;align-items:center;gap:10px;flex-shrink:0;}
.h-brand-logo{font-size:26px;line-height:1;}
.h-brand-name{font-size:20px;font-weight:900;letter-spacing:-.3px;white-space:nowrap;line-height:1.15;}
.h-brand-name .red{color:var(--red);}
.h-brand-name .gold{color:var(--gold2);}
.h-brand-sub{font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:#5a4a38;margin-top:3px;}
.h-stats{display:flex;align-items:stretch;gap:5px;height:64px;flex:1;justify-content:center;}
.h-stat{display:flex;flex-direction:column;align-items:center;justify-content:center;
  background:var(--surface);border:1.5px solid var(--border);border-radius:7px;
  padding:6px 12px;flex:1;max-width:200px;min-width:100px;}
.h-stat.active{background:rgba(192,30,44,.06);border-color:var(--red);border-width:2px;}
.h-stat.yours{background:rgba(158,94,12,.06);border-color:var(--gold-b);border-width:2px;}
.h-stat.wide{max-width:260px;}
.h-stat-k{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);margin-bottom:4px;white-space:nowrap;}
.h-stat-v{font-size:17px;font-weight:800;color:var(--text);line-height:1.2;text-align:center;}
.h-stat-v.sm{font-size:13px;font-weight:700;}
.h-stat-v.red{color:var(--red);}
.h-stat-v.gold{color:var(--gold2);}
.h-divider{width:1px;background:var(--border);align-self:stretch;margin:12px 1px;flex-shrink:0;}
.h-right{display:flex;align-items:center;gap:8px;flex-shrink:0;}
.your-turn-badge{background:var(--green);color:#fff;padding:8px 16px;font-size:12px;font-weight:800;
  letter-spacing:1.5px;text-transform:uppercase;border-radius:5px;animation:gpulse 2s infinite;
  white-space:nowrap;display:none;}
@keyframes gpulse{0%,100%{box-shadow:0 0 0 rgba(26,104,53,0)}50%{box-shadow:0 0 16px rgba(26,104,53,.3)}}
.save-dot{font-size:11px;color:var(--label);display:flex;align-items:center;gap:4px;white-space:nowrap;}
.save-dot.saved{color:var(--green);}
.header-collapse-btn{position:absolute;bottom:-13px;left:50%;transform:translateX(-50%);
  background:var(--card2);border:1px solid var(--border);border-top:none;border-radius:0 0 6px 6px;
  padding:2px 16px;font-size:9px;color:var(--label);cursor:pointer;z-index:20;font-weight:700;letter-spacing:1px;}
.header-wrap{position:relative;flex-shrink:0;}

/* NAV */
.nav-bar{height:var(--nav-h);background:var(--card2);border-bottom:2px solid var(--border);
  display:flex;align-items:flex-end;padding:0 18px;flex-shrink:0;}
.nav-tab{padding:8px 16px 10px;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;
  color:var(--label);cursor:pointer;border:none;background:transparent;border-bottom:3px solid transparent;
  position:relative;bottom:-2px;transition:color .15s,border-color .15s;white-space:nowrap;}
.nav-tab:hover{color:var(--text2);}
.nav-tab.active{color:var(--red);border-bottom-color:var(--red);}

/* VIEWS & LAYOUT */
.view{display:none;flex:1;overflow:hidden;flex-direction:column;min-height:0;}
.view.active{display:flex;}
#view-draft{flex-direction:row!important;position:relative;}

.drag-handle{width:5px;flex-shrink:0;background:transparent;cursor:col-resize;position:relative;z-index:10;touch-action:none;}
.drag-handle:hover,.drag-handle.dragging{background:rgba(158,94,12,.2);}
.drag-handle::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:2px;height:40px;background:var(--border2);border-radius:1px;}

.col-log{width:30vw;max-width:560px;flex-shrink:0;background:var(--card2);display:flex;flex-direction:column;overflow:hidden;}
.col-players{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0;background:var(--bg);}
.center-body{flex:1;display:flex;overflow:hidden;min-height:0;}
.players-pane{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0;}

.strategy-pane{width:320px;flex-shrink:0;border-left:1px solid var(--border);background:var(--card2);display:flex;flex-direction:column;overflow:hidden;}
.strat-hdr{height:38px;padding:0 14px;display:flex;align-items:center;justify-content:space-between;
  background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;}
.strat-hdr-title{font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--label);}
.strat-scroll{flex:1;overflow-y:auto;padding:12px;}
.strat-scroll::-webkit-scrollbar{width:3px;}
.strat-scroll::-webkit-scrollbar-thumb{background:var(--border2);}
.strat-card{background:var(--card);border:1px solid var(--border);border-radius:7px;margin-bottom:10px;overflow:hidden;}
.strat-card-hdr{padding:8px 12px;font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;
  color:#fff;background:var(--red);}
.strat-card-hdr.gold{background:var(--gold-b);}
.strat-card-hdr.blue{background:var(--blue);}
.strat-card-hdr.green{background:var(--green);}
.strat-card-hdr.orange{background:var(--orange);}
.strat-card-body{padding:10px 12px;}
.strat-row{display:flex;justify-content:space-between;align-items:center;padding:5px 0;
  border-bottom:1px solid var(--border);font-size:12px;}
.strat-row:last-child{border-bottom:none;}
.strat-row-label{color:var(--sub);font-weight:500;flex:1;}
.strat-row-val{font-weight:800;color:var(--text);font-size:13px;}
.strat-row-val.red{color:var(--red);}
.strat-row-val.gold{color:var(--gold2);}
.strat-row-val.green{color:var(--green);}
.strat-note{font-size:11px;color:var(--sub);line-height:1.5;padding:6px 0;}
.strat-owner-chip{display:inline-flex;align-items:center;gap:4px;font-size:11px;font-weight:700;
  padding:3px 8px;border-radius:12px;margin:2px;}
.chip-high{background:rgba(192,30,44,.1);color:var(--red);border:1px solid rgba(192,30,44,.2);}
.chip-med{background:rgba(158,94,12,.1);color:var(--gold2);border:1px solid rgba(158,94,12,.2);}
.chip-low{background:rgba(26,104,53,.1);color:var(--green);border:1px solid rgba(26,104,53,.2);}
.their-guy-row{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid var(--border);font-size:11.5px;}
.their-guy-row:last-child{border-bottom:none;}
.their-guy-own{font-weight:700;color:var(--text);}
.their-guy-name{color:var(--gold2);font-weight:600;}
.strat-tier-row{display:grid;grid-template-columns:80px 1fr;gap:8px;padding:5px 0;border-bottom:1px solid var(--border);font-size:11px;}
.strat-tier-row:last-child{border-bottom:none;}
.strat-tier-pos{font-weight:800;color:var(--text);}
.strat-tier-note{color:var(--sub);line-height:1.35;}
.col-right{width:20vw;max-width:380px;flex-shrink:0;background:var(--card2);display:flex;flex-direction:column;overflow:hidden;position:relative;}

/* LOG */
.log-toolbar{height:40px;padding:0 12px;display:flex;align-items:center;gap:8px;background:var(--surface);
  border-bottom:1px solid var(--border);flex-shrink:0;}
.log-search{flex:1;background:var(--card2);border:1.5px solid var(--border2);color:var(--text);
  font-size:12px;padding:5px 10px;border-radius:4px;transition:border-color .15s;font-family:'Outfit',sans-serif;}
.log-search:focus{outline:none;border-color:var(--gold2);}
.log-search::placeholder{color:var(--label);}
.col-hdr{height:38px;padding:0 14px;display:flex;align-items:center;justify-content:space-between;
  background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;}
.col-hdr-title{font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--label);}
.col-hdr-badge{font-size:14px;font-weight:700;color:var(--gold2);}
.log-scroll{flex:1;overflow-y:auto;}
.log-scroll::-webkit-scrollbar{width:3px;}
.log-scroll::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px;}
.rnd-hdr{padding:5px 14px;font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;
  color:var(--label);background:var(--surface);border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);display:flex;justify-content:space-between;}
.log-entry{display:grid;grid-template-columns:44px 1fr 38px;padding:7px 14px;border-bottom:1px solid rgba(0,0,0,.06);
  gap:8px;align-items:center;cursor:pointer;transition:background .1s;min-height:50px;}
.log-entry:hover{background:rgba(0,0,0,.03);}
.log-entry.mine{background:rgba(158,94,12,.07);border-left:3px solid var(--gold-b);padding-left:11px;}
.log-entry.clock{background:rgba(26,74,138,.06);border-left:3px solid var(--blue);padding-left:11px;}
.log-entry.pending{opacity:.2;cursor:default;}
.le-num{font-size:10px;color:var(--label);font-weight:600;line-height:1.3;}
.le-own{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--label);}
.le-own.you{color:var(--gold2);}
.le-name{font-size:15px;font-weight:700;color:var(--text);line-height:1.2;margin-top:1px;}
.le-name.empty{color:var(--muted);font-style:italic;font-size:12px;}
.le-name.clk{color:var(--blue);}
.le-pos{font-size:10px;font-weight:700;background:var(--surface);color:var(--label2);padding:3px 5px;border-radius:3px;text-align:center;}

.rookie-badge{display:inline-block;font-size:8px;font-weight:800;padding:1px 5px;border-radius:3px;
  background:var(--green-dim);color:var(--green);border:1px solid rgba(26,104,53,.2);
  margin-left:5px;vertical-align:middle;letter-spacing:.5px;text-transform:uppercase;}
.player-row.is-rookie{border-left:2.5px solid var(--green);}

/* KEEPERS */
.kp-card{background:var(--card);border:2px solid var(--border);border-radius:10px;overflow:hidden;transition:border-color .2s;}
.kp-card.kp-complete{border-color:rgba(26,104,53,.35);}
.kp-card.kp-partial{border-color:rgba(158,94,12,.35);}
.kp-card.kp-mine{border-color:var(--red);box-shadow:0 0 0 1px rgba(192,30,44,.12);}
.kp-hdr{padding:12px 16px;display:flex;align-items:center;gap:10px;border-bottom:1px solid var(--border);background:var(--surface);}
.kp-owner{font-size:12px;font-weight:800;letter-spacing:.5px;color:var(--text);flex:1;}
.kp-badge{font-size:9.5px;font-weight:700;padding:3px 9px;border-radius:10px;letter-spacing:.5px;text-transform:uppercase;}
.kp-badge-done{background:var(--green-dim);color:var(--green);border:1px solid rgba(26,104,53,.2);}
.kp-badge-partial{background:var(--gold-dim);color:var(--gold2);border:1px solid rgba(158,94,12,.2);}
.kp-badge-tbd{background:var(--surface);color:var(--label);border:1px solid var(--border);}
.kp-badge-mine{background:var(--red-dim);color:var(--red);border:1px solid rgba(192,30,44,.2);}
.kp-slots{padding:14px 16px;display:flex;flex-direction:column;gap:10px;}
.kp-slot{display:flex;align-items:center;gap:10px;}
.kp-pos-tag{display:inline-block;font-size:7.5px;font-weight:800;padding:1px 4px;border-radius:3px;
  margin-left:4px;vertical-align:middle;letter-spacing:.3px;color:#fff;background:var(--muted);}
.kp-pos-tag.pos-sp{background:var(--blue);}
.kp-pos-tag.pos-rp{background:#8b5cf6;}
.kp-pos-tag.pos-of{background:var(--green);}
.kp-pos-tag.pos-c{background:#d97706;}
.kp-pos-tag.pos-ss,.kp-pos-tag.pos-2b,.kp-pos-tag.pos-3b,.kp-pos-tag.pos-1b{background:var(--red);}
.kp-slot-label{font-size:9.5px;font-weight:700;color:var(--label);letter-spacing:1px;text-transform:uppercase;width:26px;flex-shrink:0;}
.kp-input-wrap{position:relative;flex:1;}
.kp-input{width:100%;padding:8px 12px;font-size:12px;font-weight:600;font-family:'Outfit',sans-serif;
  background:var(--card2);border:1.5px solid var(--border);border-radius:6px;color:var(--text);
  transition:border-color .15s;}
.kp-input:focus{outline:none;border-color:var(--red);background:#fff;}
.kp-input.kp-filled{border-color:rgba(26,104,53,.4);background:rgba(26,104,53,.03);color:var(--green);}
.kp-input.kp-invalid{border-color:var(--red);background:var(--red-dim);}
.kp-suggestions{position:absolute;top:100%;left:0;right:0;z-index:999;background:var(--card2);
  border:1.5px solid var(--border2);border-radius:6px;margin-top:2px;max-height:180px;overflow-y:auto;
  box-shadow:0 6px 20px rgba(0,0,0,.12);}
.kp-sug-item{padding:8px 12px;font-size:12px;cursor:pointer;display:flex;align-items:center;gap:8px;border-bottom:1px solid var(--border);}
.kp-sug-item:last-child{border-bottom:none;}
.kp-sug-item:hover,.kp-sug-item.kp-sug-active{background:var(--red-dim);}
.kp-sug-pos{font-size:9.5px;font-weight:700;color:var(--label);background:var(--surface);padding:1px 5px;border-radius:3px;flex-shrink:0;}
.kp-sug-team{font-size:10px;color:var(--sub);margin-left:auto;flex-shrink:0;}
.kp-sug-taken{color:var(--muted);text-decoration:line-through;cursor:not-allowed;}
.kp-save-btn{width:100%;margin-top:4px;padding:8px;font-size:11px;font-weight:800;letter-spacing:1px;
  text-transform:uppercase;font-family:'Outfit',sans-serif;border:none;border-radius:6px;cursor:pointer;
  background:var(--red);color:#fff;transition:background .15s;}
.kp-save-btn:hover{background:var(--red2);}
.kp-save-btn:disabled{background:var(--muted);cursor:not-allowed;}
.kp-champ{font-size:11px;}

/* STRATEGY */
.sc-card{background:var(--card);border:2px solid var(--border);border-radius:10px;padding:16px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;}
.sc-card:hover{border-color:var(--border2);transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,0,0,.08);}
.sc-stripe{position:absolute;top:0;left:0;right:0;height:4px;}
.sc-stripe-blue{background:var(--blue);}.sc-stripe-red{background:var(--red);}.sc-stripe-gold{background:var(--gold);}
.sc-card.sc-selected{border-width:2.5px;transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.1);}
#sc-balanced.sc-selected{border-color:var(--blue);background:var(--blue-dim);}
#sc-punt.sc-selected{border-color:var(--red);background:var(--red-dim);}
#sc-svheavy.sc-selected{border-color:var(--gold);background:var(--gold-dim);}
.sc-badge-sel{position:absolute;top:10px;right:10px;background:var(--green);color:#fff;font-size:8.5px;font-weight:800;padding:3px 7px;border-radius:3px;letter-spacing:1px;text-transform:uppercase;}
.sc-icon{font-size:24px;margin-bottom:6px;}.sc-name{font-size:13px;font-weight:900;letter-spacing:1px;text-transform:uppercase;margin-bottom:6px;}
.sc-desc{font-size:11px;color:var(--sub);line-height:1.5;margin-bottom:10px;}
.sc-cats{display:flex;flex-wrap:wrap;gap:4px;}
.sc-pill{padding:3px 8px;border-radius:3px;font-size:10px;font-weight:700;letter-spacing:.5px;}
.sc-target{background:var(--green-dim);color:var(--green);border:1px solid rgba(26,104,53,.2);}
.sc-punt{background:var(--red-dim);color:var(--red);text-decoration:line-through;opacity:.8;}
.sc-neutral{background:var(--surface);color:var(--label2);}
.sc-panel{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:16px;}
.sc-panel-title{font-size:9.5px;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--label);margin-bottom:12px;}
.sc-stat-box{background:var(--surface);border-radius:6px;padding:12px;text-align:center;}
.sc-stat-val{font-size:22px;font-weight:900;}.sc-stat-lbl{font-size:9.5px;color:var(--label);margin-top:3px;text-transform:uppercase;letter-spacing:.5px;line-height:1.3;}
.sc-guide-row{display:grid;grid-template-columns:100px 1fr;gap:8px;align-items:center;}
.sc-guide-lbl{font-size:9.5px;font-weight:800;color:var(--label);text-transform:uppercase;letter-spacing:.5px;}
.sc-guide-bar{height:26px;border-radius:4px;display:flex;align-items:center;padding:0 10px;font-size:11px;font-weight:700;color:#fff;}
.sc-guide-elite{background:var(--red);}.sc-guide-premium{background:var(--gold);}.sc-guide-value{background:var(--blue);}.sc-guide-late{background:var(--sub);}.sc-guide-skip{background:var(--surface);color:var(--label);}

/* PLAYERS TOOLBAR */
.players-toolbar{height:42px;padding:0 14px;background:var(--card);border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:5px;flex-shrink:0;}
.pos-btn{padding:4px 10px;font-size:11px;font-weight:700;background:transparent;border:1.5px solid var(--border2);
  color:var(--label2);cursor:pointer;border-radius:4px;transition:all .15s;white-space:nowrap;}
.pos-btn:hover{border-color:var(--text2);color:var(--text2);}
.pos-btn.on{background:var(--red);border-color:var(--red);color:#fff;}
.show-taken-btn{padding:4px 9px;font-size:11px;font-weight:700;background:transparent;border:1.5px solid var(--border2);
  color:var(--label);cursor:pointer;border-radius:4px;transition:all .15s;}
.show-taken-btn.on{background:var(--red-dim);border-color:var(--red);color:var(--red);}
.search-box{margin-left:auto;background:var(--card2);border:1.5px solid var(--border2);color:var(--text);
  font-size:13px;padding:5px 11px;border-radius:4px;width:160px;transition:border-color .15s;font-family:'Outfit',sans-serif;}
.search-box:focus{outline:none;border-color:var(--gold2);}
.search-box::placeholder{color:var(--label);}
.avail-count{font-size:11px;color:var(--label);white-space:nowrap;font-weight:600;}

/* SORTABLE HEADERS */
.players-head{display:grid;
  grid-template-columns:34px 1fr 50px 62px 62px 62px 62px 62px 56px 46px;
  padding:0 14px;height:30px;align-items:center;background:var(--surface);
  border-bottom:1.5px solid var(--border);flex-shrink:0;}
.ph{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);}
.ph.s{cursor:pointer;user-select:none;display:flex;align-items:center;justify-content:flex-end;gap:2px;padding:0 2px;transition:color .15s;}
.ph.s:hover{color:var(--text);}
.ph.s.asc::after{content:'‚ñ≤';font-size:7px;color:var(--gold2);}
.ph.s.desc::after{content:'‚ñº';font-size:7px;color:var(--gold2);}

/* PLAYER ROWS */
.players-list{flex:1;overflow-y:auto;overflow-x:hidden;}
.players-list::-webkit-scrollbar{width:4px;}
.players-list::-webkit-scrollbar-thumb{background:var(--border2);}
.tier-hdr{padding:5px 14px;font-size:8.5px;font-weight:700;letter-spacing:3px;text-transform:uppercase;
  color:var(--label);background:var(--surface);border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
.tier-hdr.t1{color:var(--gold2);}
.player-row{display:grid;
  grid-template-columns:34px 1fr 50px 62px 62px 62px 62px 62px 56px 46px;
  padding:0 14px;min-height:58px;align-items:center;border-bottom:1px solid var(--border);
  cursor:pointer;transition:background .1s;background:var(--card2);}
.player-row:nth-child(even):not(.tier-hdr){background:var(--card);}
.player-row:hover{background:rgba(158,94,12,.06)!important;}
.player-row.t1{box-shadow:inset 3px 0 0 rgba(158,94,12,.5);}
.player-row.t2{box-shadow:inset 3px 0 0 rgba(26,74,138,.25);}
.player-row.taken{opacity:.25;cursor:default;}
.player-row.taken .pr-name{text-decoration:line-through;}
.pr-rank{font-size:11px;color:var(--label);font-weight:600;}
.pr-name{font-size:15px;font-weight:700;color:var(--text);line-height:1.1;}
.pr-meta{font-size:10px;color:var(--label);margin-top:2px;font-weight:500;}
.pr-extra{font-size:9.5px;color:var(--sub);margin-top:1px;}
.pr-pos{font-size:11px;font-weight:700;text-align:center;padding:3px 4px;border-radius:3px;white-space:nowrap;}
.pr-stat{font-size:13px;text-align:right;color:var(--text2);font-weight:500;}
.pr-ops{font-size:11px;text-align:right;color:var(--label2);font-weight:600;}
.pr-adp{font-size:11px;text-align:right;color:var(--label);font-weight:600;}
.pos-sp{background:rgba(26,74,138,.11);color:var(--blue);}
.pos-rp{background:rgba(184,76,14,.11);color:var(--orange);}
.pos-of{background:rgba(26,104,53,.1);color:var(--green);}
.pos-c{background:rgba(100,40,120,.1);color:var(--purple);}
.pos-ss,.pos-2b{background:rgba(158,94,12,.11);color:var(--gold2);}
.pos-3b{background:rgba(180,60,20,.1);color:#b44014;}
.pos-1b{background:rgba(160,30,30,.1);color:#ae2828;}
.pos-dh{background:var(--surface);color:var(--sub);}

/* RIGHT PANEL */
.collapse-right-btn{position:absolute;left:-13px;top:50%;transform:translateY(-50%);width:13px;height:44px;
  background:var(--surface);border:1px solid var(--border);border-right:none;border-radius:4px 0 0 4px;
  cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:9px;color:var(--label);z-index:5;}
.collapse-right-btn:hover{background:var(--card);color:var(--text);}
.st-head{display:grid;grid-template-columns:20px 1fr repeat(4,1fr) 34px;padding:5px 12px;
  background:var(--surface);border-bottom:1px solid var(--border);}
.st-head span{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);text-align:center;}
.st-head span:nth-child(2){text-align:left;}
.st-head span:last-child{text-align:right;}
.st-row{display:grid;grid-template-columns:20px 1fr repeat(4,1fr) 34px;padding:8px 12px;
  border-bottom:1px solid var(--border);align-items:center;}
.st-row.you{background:rgba(158,94,12,.07);border-left:3px solid var(--gold-b);padding-left:9px;}
.st-rk{font-size:11px;text-align:center;font-weight:700;color:var(--label);}
.st-nm{font-size:13px;font-weight:700;color:var(--text);}
.st-cat{font-size:11px;text-align:center;font-weight:700;}
.st-tot{font-size:16px;font-weight:800;color:var(--gold2);text-align:right;}
.c1{color:#1a6835}.c2{color:#2a8a4a}.c3{color:#1a4a8a}.c4{color:#9a6e10}.c5{color:#b84e10}.c6{color:#c02828}.c7{color:#c01e2c}

/* ENHANCED NEEDS */
.needs-section{padding:10px 12px;border-bottom:1px solid var(--border);flex-shrink:0;}
.needs-label{font-size:8.5px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--red);margin-bottom:8px;}
.needs-detail{display:grid;grid-template-columns:1fr 1fr;gap:5px;}
.need-item{background:var(--surface);border:1px solid var(--border);border-radius:5px;padding:7px 9px;}
.need-item.urgent{border-color:rgba(192,30,44,.3);background:rgba(192,30,44,.04);}
.need-item.ok{border-color:rgba(26,104,53,.2);background:rgba(26,104,53,.04);opacity:.55;}
.need-pos{font-size:11px;font-weight:800;color:var(--text);}
.need-pos.urgent{color:var(--red);}
.need-pos.ok{color:var(--green);}
.need-filled{font-size:9px;color:var(--label);margin-top:2px;}
.need-bar{height:3px;background:var(--border);border-radius:2px;margin-top:4px;overflow:hidden;}
.need-bar-fill{height:100%;background:var(--green);border-radius:2px;transition:width .3s;}
.need-bar-fill.partial{background:var(--gold2);}
.need-bar-fill.none{background:var(--red);}

.fall-risk-hdr{flex-shrink:0;padding:0 12px;height:34px;display:flex;align-items:center;justify-content:space-between;
  background:var(--surface);border-bottom:1px solid var(--border);border-top:1px solid var(--border);}
.fr-title{font-size:8.5px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--label);}
.fr-sub{font-size:10px;color:var(--label);font-weight:600;}
.fall-risk-list{flex:1;overflow-y:auto;}
.fall-risk-list::-webkit-scrollbar{width:3px;}
.fall-risk-list::-webkit-scrollbar-thumb{background:var(--border2);}
.fr-item{display:grid;grid-template-columns:48px 1fr 58px;padding:8px 12px;border-bottom:1px solid var(--border);
  align-items:center;gap:7px;cursor:pointer;transition:background .1s;}
.fr-item:nth-child(even){background:var(--card);}
.fr-item:hover{background:rgba(158,94,12,.06)!important;}
.fr-pct{text-align:center;font-size:15px;font-weight:800;padding:4px;border-radius:4px;line-height:1;}
.pct-low{background:var(--red-dim);color:var(--red);border:1px solid rgba(192,30,44,.15);}
.pct-med{background:var(--gold-dim);color:var(--gold2);border:1px solid rgba(158,94,12,.15);}
.pct-high{background:var(--green-dim);color:var(--green);border:1px solid rgba(26,104,53,.15);}
.fr-name{font-size:13px;font-weight:700;color:var(--text);line-height:1.1;}
.fr-det{font-size:9.5px;color:var(--label);margin-top:2px;}
.fr-act{font-size:11px;font-weight:800;letter-spacing:.5px;text-transform:uppercase;text-align:right;}
.act-now{color:var(--red);}
.act-risky{color:var(--gold2);}
.act-wait{color:var(--green);}

/* LOG BAR */
.log-bar{height:50px;flex-shrink:0;background:var(--card2);border-top:3px solid var(--gold-b);
  display:flex;align-items:center;padding:0 18px;gap:9px;position:relative;z-index:50;
  box-shadow:0 -2px 10px rgba(0,0,0,.08);}
.lb-label{font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);white-space:nowrap;}
.lb-owner{background:var(--surface);border:1.5px solid var(--border2);color:var(--text);font-size:13px;font-weight:600;
  padding:6px 9px;border-radius:4px;font-family:'Outfit',sans-serif;}
.lb-wrap{flex:1;max-width:320px;position:relative;}
.lb-input{width:100%;background:var(--card2);border:1.5px solid var(--border2);color:var(--text);
  font-size:13px;font-weight:500;padding:7px 11px;border-radius:4px;transition:border-color .15s;font-family:'Outfit',sans-serif;}
.lb-input:focus{outline:none;border-color:var(--gold2);}
.lb-input::placeholder{color:var(--label);}
.ac-dropdown{position:absolute;bottom:calc(100% + 4px);left:0;right:0;background:var(--card2);
  border:2px solid var(--gold-b);border-radius:5px;max-height:240px;overflow-y:auto;z-index:200;display:none;
  box-shadow:0 -8px 24px rgba(0,0,0,.12);}
.ac-item{padding:9px 13px;cursor:pointer;border-bottom:1px solid var(--border);transition:background .1s;}
.ac-item:hover,.ac-item.sel{background:var(--gold-dim);}
.ac-name{font-size:14px;font-weight:700;color:var(--text);}
.ac-meta{font-size:9.5px;color:var(--label);margin-top:2px;}
.lb-log-btn{background:var(--gold-b);color:#fff;border:none;padding:8px 20px;font-size:13px;font-weight:800;
  letter-spacing:1px;text-transform:uppercase;cursor:pointer;border-radius:4px;transition:all .15s;
  white-space:nowrap;font-family:'Outfit',sans-serif;}
.lb-log-btn:hover{background:var(--gold2);}
.lb-undo-btn{background:transparent;color:var(--label2);border:1.5px solid var(--border2);padding:6px 13px;
  font-size:12px;font-weight:600;cursor:pointer;border-radius:4px;font-family:'Outfit',sans-serif;}
.lb-undo-btn:hover{color:var(--text);}
.lb-rd-info{display:flex;flex-direction:column;}
.lb-rd-label{font-size:8.5px;letter-spacing:2px;text-transform:uppercase;color:var(--label);font-weight:600;}
.lb-rd-val{font-size:16px;font-weight:800;color:var(--text);}
.lb-rd-val .gold{color:var(--gold2);}

/* ALL TEAMS */
#view-teams{flex-direction:column;}
.teams-scroll-wrap{flex:1;overflow-x:auto;overflow-y:hidden;display:flex;padding:0;}
.teams-scroll-wrap::-webkit-scrollbar{height:5px;}
.teams-scroll-wrap::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px;}
.team-col{flex:1 1 calc(100% / 7);min-width:200px;border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden;background:var(--card2);}
.team-col:first-child{border-left:1px solid var(--border);}
.team-col.you-col{background:rgba(158,94,12,.04);border-top:3px solid var(--gold-b);}
.tc-header{padding:10px 12px;background:var(--surface);border-bottom:2px solid var(--border);flex-shrink:0;}
.tc-owner{font-size:15px;font-weight:900;color:var(--text);line-height:1;}
.tc-teamname{font-size:9px;color:var(--label);margin-top:2px;font-style:italic;}
.tc-champs{font-size:10px;color:var(--gold2);font-weight:700;margin-top:3px;}
.tc-meta{display:flex;align-items:center;gap:5px;margin-top:5px;}
.tc-threat{font-size:8px;font-weight:800;letter-spacing:1px;text-transform:uppercase;padding:2px 6px;border-radius:3px;}
.tc-picks-count{font-size:9px;color:var(--label);font-weight:600;}
.tc-keeper-strip{padding:6px 10px;background:rgba(158,94,12,.05);border-bottom:1px solid var(--border);flex-shrink:0;}
.tc-keeper-tag{display:block;font-size:11px;font-weight:700;color:var(--gold2);padding:3px 0;line-height:1.4;}
.tc-keeper-tag .k-pos{display:inline-block;font-size:9px;background:var(--gold-dim);border:1px solid rgba(158,94,12,.2);padding:1px 5px;border-radius:3px;margin-right:5px;vertical-align:middle;}
.tc-keeper-tag.tbd{color:var(--label);}
.tc-intel{padding:6px 10px;border-bottom:1px solid var(--border);flex-shrink:0;font-size:10px;color:var(--sub);line-height:1.4;background:var(--surface);}
.tc-intel strong{color:var(--text2);}
.tc-picks-list{flex:1;overflow-y:auto;}
.tc-picks-list::-webkit-scrollbar{width:3px;}
.tc-picks-list::-webkit-scrollbar-thumb{background:var(--border2);}
.tc-pick-row{display:grid;grid-template-columns:26px 38px 1fr;padding:5px 10px;border-bottom:1px solid var(--border);align-items:center;gap:5px;}
.tc-pick-row:nth-child(even){background:rgba(0,0,0,.025);}
.tc-rnd{font-size:9px;color:var(--label);font-weight:600;}
.tc-pos{font-size:9px;font-weight:700;padding:1px 4px;border-radius:3px;text-align:center;}
.tc-pname{font-size:12px;font-weight:700;color:var(--text);}
.tc-empty{padding:12px 10px;color:var(--muted);font-style:italic;font-size:11px;}

.td-header{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:20px;
  background:var(--card2);border:1.5px solid var(--border);border-radius:8px;padding:20px 24px;margin-bottom:16px;}
.td-name{font-size:28px;font-weight:900;color:var(--text);}
.td-sub{font-size:12px;color:var(--sub);margin-top:3px;}
.td-champs{color:var(--gold2);font-size:14px;font-weight:700;margin-top:4px;}
.td-intel-box{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:12px 16px;}
.td-intel-label{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);margin-bottom:6px;}
.td-intel-note{font-size:13px;color:var(--text2);line-height:1.5;}
.td-intel-guy{margin-top:6px;font-size:12px;color:var(--sub);}
.td-intel-guy strong{color:var(--gold2);}
.td-threat{font-size:22px;font-weight:900;padding:8px 16px;border-radius:6px;text-align:center;}
.threat-high{color:var(--red);background:rgba(192,30,44,.08);border:1.5px solid rgba(192,30,44,.2);}
.threat-med{color:var(--gold2);background:rgba(158,94,12,.08);border:1.5px solid rgba(158,94,12,.2);}
.threat-low{color:var(--green);background:rgba(26,104,53,.08);border:1.5px solid rgba(26,104,53,.2);}

.td-body{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.td-section{background:var(--card2);border:1px solid var(--border);border-radius:8px;overflow:hidden;}
.td-section-hdr{padding:10px 16px;background:var(--surface);border-bottom:1px solid var(--border);
  font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--label);}
.td-keeper-row{display:flex;gap:8px;padding:12px 16px;flex-wrap:wrap;}
.keeper-tag{background:var(--gold-dim);border:1px solid rgba(158,94,12,.2);color:var(--gold2);
  padding:5px 12px;font-size:13px;font-weight:700;border-radius:4px;}
.keeper-tag.tbd{background:var(--surface);border-color:var(--border);color:var(--label);}
.td-pick-row{display:grid;grid-template-columns:36px 46px 1fr;padding:8px 16px;border-bottom:1px solid var(--border);
  gap:10px;align-items:center;}
.td-pk-rnd{font-size:11px;color:var(--label);font-weight:600;}
.td-pk-pos{font-size:11px;font-weight:700;background:var(--surface);color:var(--label2);padding:2px 6px;border-radius:3px;text-align:center;}
.td-pk-name{font-size:14px;font-weight:700;color:var(--text);}
.no-picks{padding:16px;color:var(--muted);font-style:italic;font-size:13px;}

/* ROTO DETAIL */
#view-roto{flex-direction:column;}
.roto-toolbar{height:38px;padding:0 16px;background:var(--card2);border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:12px;flex-shrink:0;justify-content:space-between;}
.roto-scroll{flex:1;overflow-y:auto;padding:12px 16px;}
.roto-scroll::-webkit-scrollbar{width:4px;}
.roto-scroll::-webkit-scrollbar-thumb{background:var(--border2);}
.roto-top-row{display:grid;grid-template-columns:auto 1fr;gap:16px;margin-bottom:16px;align-items:start;}
.roto-section-title{font-size:9.5px;font-weight:700;letter-spacing:3px;text-transform:uppercase;
  color:var(--label);margin-bottom:10px;padding-bottom:4px;border-bottom:2px solid var(--border);}
.roto-table-wrap{overflow-x:auto;}
.roto-table{width:100%;border-collapse:collapse;background:var(--card2);border-radius:8px;overflow:hidden;border:1px solid var(--border);}
.roto-table th{background:var(--text);color:#fff;padding:10px 12px;font-size:9.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;white-space:nowrap;}
.roto-table td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:center;font-weight:700;font-size:14px;}
.roto-table td:nth-child(2){text-align:left;font-size:15px;}
.roto-table tr.you-row{background:rgba(158,94,12,.08);border-left:3px solid var(--gold-b);}
.roto-table .tot{font-size:18px;color:var(--gold2);}
.roto-charts-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:24px;}
.roto-chart-card{background:var(--card2);border:1px solid var(--border);border-radius:8px;padding:12px;overflow:hidden;min-height:0;}
.roto-chart-card.wide{grid-column:span 2;}
.roto-chart-title{font-size:13px;font-weight:800;color:var(--text);margin-bottom:2px;}
.roto-chart-sub{font-size:9.5px;color:var(--label);margin-bottom:8px;}
.roto-edit-row{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-bottom:16px;}
.roto-edit-card{background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:10px;}
.re-owner{font-size:12px;font-weight:800;color:var(--text);margin-bottom:6px;}
.re-cats{display:grid;grid-template-columns:repeat(4,1fr);gap:4px;}
.re-cat{display:flex;flex-direction:column;align-items:center;}
.re-cat-label{font-size:8px;letter-spacing:1px;text-transform:uppercase;color:var(--label);margin-bottom:2px;}
.re-cat-input{width:100%;border:1px solid var(--border);background:var(--surface);text-align:center;
  font-size:14px;font-weight:800;padding:3px;border-radius:3px;color:var(--text);font-family:'Outfit',sans-serif;
  transition:border-color .15s;}
.re-cat-input:focus{outline:none;border-color:var(--gold2);}
.roto-insight-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:24px;}
.roto-insight-card{background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:10px 12px;}
.ric-cat{font-size:16px;font-weight:900;margin-bottom:6px;}
.ric-row{font-size:11px;color:var(--sub);margin-bottom:3px;}
.ric-score{font-weight:800;}

/* MULTI RANKINGS */
#view-multi{flex-direction:column;}
.multi-toolbar{height:42px;padding:0 16px;background:var(--card2);border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:7px;flex-shrink:0;overflow:hidden;}
.multi-search{background:var(--card2);border:1.5px solid var(--border2);color:var(--text);
  font-size:13px;padding:5px 11px;border-radius:4px;width:150px;font-family:'Outfit',sans-serif;margin-left:auto;}
.multi-search:focus{outline:none;border-color:var(--gold2);}
.multi-search::placeholder{color:var(--label);}
.mr-note{background:var(--gold-dim);border:1px solid rgba(158,94,12,.2);border-radius:5px;
  padding:8px 14px;font-size:11px;color:var(--sub);margin-bottom:12px;}
.mr-wrap{flex:1;display:flex;flex-direction:column;overflow:hidden;padding:12px 16px;background:var(--bg);}
.mr-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0;flex:1;border:1px solid var(--border);border-radius:8px;overflow:hidden;}
.mr-col{display:flex;flex-direction:column;border-right:1px solid var(--border);overflow:hidden;}
.mr-col:last-child{border-right:none;}
.mr-col-hdr{padding:10px 14px;font-size:11px;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:#fff;flex-shrink:0;}
.mr-col-hdr.fp{background:#1a4a8a;}
.mr-col-hdr.espn{background:#cc0000;}
.mr-col-hdr.cbs{background:#003d88;}
.mr-col-hdr.mlb{background:#002d72;}
.mr-col-sub{padding:4px 14px;font-size:9.5px;color:var(--label);background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;}
.mr-col-list{flex:1;overflow-y:auto;}
.mr-col-list::-webkit-scrollbar{width:3px;}
.mr-col-list::-webkit-scrollbar-thumb{background:var(--border2);}
.mr-row{display:flex;align-items:center;gap:9px;padding:7px 13px;border-bottom:1px solid var(--border);
  cursor:pointer;transition:background .1s;min-height:42px;}
.mr-row:nth-child(even){background:var(--card);}
.mr-row:hover:not(.mr-taken){background:rgba(158,94,12,.06)!important;}
.mr-row.mr-taken{opacity:.28;}
.mr-rk{font-size:11px;color:var(--label);font-weight:600;min-width:26px;}
.mr-name{font-size:13px;font-weight:700;color:var(--text);}
.mr-name.struck{text-decoration:line-through;}
.mr-meta{font-size:9.5px;color:var(--label);}

/* MODAL & CONFIRM OVERLAYS */
.modal-overlay{position:fixed;inset:0;background:rgba(26,20,14,.55);z-index:1000;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px);}
.modal-overlay.hidden{display:none;}
.modal{background:var(--card2);border:2px solid var(--border);border-radius:10px;width:480px;max-width:95vw;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.15);}
.modal::-webkit-scrollbar{width:4px;}
.modal::-webkit-scrollbar-thumb{background:var(--border2);}
.modal-hdr{padding:18px 22px 14px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:flex-start;background:var(--card);}
.modal-name{font-size:26px;font-weight:800;color:var(--text);line-height:1;}
.modal-meta{font-size:11px;color:var(--label);margin-top:5px;}
.modal-close{background:transparent;border:1.5px solid var(--border);color:var(--label);width:26px;height:26px;border-radius:4px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;}
.modal-body{padding:18px 22px;}
.modal-adp-row{display:flex;justify-content:space-between;align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:9px 14px;margin-bottom:14px;}
.modal-adp-label{font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);}
.modal-adp-val{font-size:20px;font-weight:800;color:var(--gold2);}
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:7px;margin-bottom:14px;}
.stat-box{background:var(--surface);border:1px solid var(--border);border-radius:5px;padding:10px 8px;text-align:center;}
.stat-box-val{font-size:20px;font-weight:800;color:var(--gold2);line-height:1;}
.stat-box-label{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);margin-top:4px;}
.modal-pos-badge{font-size:12px;font-weight:700;padding:3px 8px;border-radius:4px;}
.modal-draft-btn{width:100%;background:var(--gold-b);color:#fff;border:none;padding:12px;font-size:14px;font-weight:800;letter-spacing:1px;text-transform:uppercase;cursor:pointer;border-radius:6px;font-family:'Outfit',sans-serif;}
.modal-draft-btn:hover{background:var(--gold2);}
.modal-taken-info{background:var(--red-dim);border:1px solid rgba(192,30,44,.2);border-radius:6px;padding:11px 14px;font-size:14px;font-weight:700;color:var(--red);}
.modal-fp-rank{display:flex;justify-content:space-between;align-items:center;padding:8px 13px;background:var(--surface);border:1px solid var(--border);border-radius:6px;margin-bottom:12px;}
.modal-fp-label{font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);}
.modal-fp-val{font-size:17px;font-weight:800;color:var(--gold2);}

.confirm-overlay{position:fixed;inset:0;background:rgba(26,20,14,.6);z-index:2000;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(5px);}
.confirm-overlay.hidden{display:none;}
.confirm-box{background:var(--card2);border:2px solid var(--gold-b);border-radius:10px;padding:26px;width:380px;max-width:90vw;text-align:center;box-shadow:0 20px 48px rgba(0,0,0,.12);}
.confirm-title{font-size:18px;font-weight:800;letter-spacing:1px;text-transform:uppercase;margin-bottom:10px;}
.confirm-msg{font-size:14px;color:var(--sub);margin-bottom:18px;line-height:1.6;}
.confirm-player{color:var(--gold2);font-weight:700;}
.confirm-owner{color:var(--blue);font-weight:700;}
.confirm-btns{display:flex;gap:10px;justify-content:center;}
.confirm-yes{background:var(--gold-b);color:#fff;border:none;padding:9px 28px;font-size:13px;font-weight:800;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;}
.confirm-yes:hover{background:var(--gold2);}
.confirm-no{background:transparent;color:var(--label);border:1.5px solid var(--border2);padding:9px 20px;font-size:13px;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;}
.toast{position:fixed;bottom:64px;left:50%;transform:translateX(-50%);background:var(--green);color:#fff;
  padding:9px 22px;border-radius:5px;font-size:13px;font-weight:800;letter-spacing:1px;z-index:3000;
  opacity:0;transition:opacity .25s;pointer-events:none;}
.toast.show{opacity:1;}
</style>
</head>
<body>

<div class="ticker">
  <div class="t-live" id="liveStatusBadge" title="Connectivity status">Live</div>
  <div class="t-items">
    <div class="ti"><span class="ti-k">Pick</span><span class="ti-v hot" id="tickPick">1 of 161</span></div>
    <div class="ti"><span class="ti-k">Round</span><span class="ti-v" id="tickRound">1</span></div>
    <div class="ti"><span class="ti-k">On Clock</span><span class="ti-v hot" id="tickClock">‚Äî</span></div>
    <div class="ti"><span class="ti-k">On Deck</span><span class="ti-v" id="tickDeck">‚Äî</span></div>
    <div class="ti"><span class="ti-k">Your Next</span><span class="ti-v you" id="tickNext">‚Äî</span></div>
    <div class="ti"><span class="ti-k">‚ö† At Risk</span><span class="ti-v warn" id="tickRisk">‚Äî</span></div>
    <div class="ti"><span class="ti-k">Available</span><span class="ti-v" id="tickAvail">‚Äî</span></div>
    <div class="ti" style="margin-left:auto;">
      <button onclick="showResetConfirm()" style="background:rgba(192,30,44,.15);border:1px solid rgba(192,30,44,.3);color:var(--red);padding:3px 10px;border-radius:3px;font-size:9px;font-weight:800;letter-spacing:1px;cursor:pointer;font-family:'Outfit',sans-serif;text-transform:uppercase;">‚ö† Reset</button>
    </div>
  </div>
</div>

<div class="header-wrap" id="headerWrap">
  <div class="header">
    <div class="h-brand">
      <div class="h-brand-logo">üî¥</div>
      <div class="h-brand-text">
        <div class="h-brand-name"><span class="red">Red Devils</span> <span class="gold">2026</span></div>
        <div class="h-brand-sub">40th Season ¬∑ March 14, 2026 ¬∑ The Farm</div>
      </div>
    </div>
    <div class="h-stats">
      <div class="h-stat active"><div class="h-stat-k">On Clock</div><div class="h-stat-v red" id="hsClock">‚Äî</div></div>
      <div class="h-divider"></div>
      <div class="h-stat"><div class="h-stat-k">Pick #</div><div class="h-stat-v" id="hsPick">1 of 161</div></div>
      <div class="h-stat"><div class="h-stat-k">Round</div><div class="h-stat-v" id="hsRound">1</div></div>
      <div class="h-divider"></div>
      <div class="h-stat wide"><div class="h-stat-k">On Deck</div><div class="h-stat-v sm" id="hsDeck">‚Äî</div></div>
      <div class="h-divider"></div>
      <div class="h-stat yours"><div class="h-stat-k">Your Next Pick</div><div class="h-stat-v gold" id="hsNext">‚Äî</div></div>
    </div>
    <div class="h-right">
      <button onclick="promptForToken()" style="background:transparent;border:1.5px solid var(--border2);border-radius:4px;padding:4px 10px;font-size:11px;font-weight:700;color:var(--text);cursor:pointer;margin-right:8px;font-family:'Outfit',sans-serif;" id="syncBtn">‚òÅÔ∏è Setup Sync</button>
      <span class="save-dot local-only" id="saveIndicator">‚óè Local Only</span>
      <div class="your-turn-badge" id="yourTurnBadge">‚ö° Your Turn</div>
    </div>
  </div>
  <button class="header-collapse-btn" id="headerCollapseBtn" onclick="toggleHeader()">‚ñ≤ HIDE HEADER</button>
</div>

<div class="nav-bar">
  <button class="nav-tab active" onclick="switchView('draft',this)">üéØ Draft</button>
  <button class="nav-tab" onclick="switchView('teams',this)">üë• All Teams</button>
  <button class="nav-tab" onclick="switchView('roto',this)">üìä Roto Detail</button>
  <button class="nav-tab" onclick="switchView('multi',this)">üåê Multi-Site Rankings</button>
  <button class="nav-tab" onclick="switchView('strategy',this)">‚ôü Punt Strategy</button>
  <button class="nav-tab" onclick="switchView('keepers',this)">üîí Keepers</button>
  <button class="nav-tab" onclick="switchView('export',this)">üìã Ask Claude</button>
</div>

<div class="view active" id="view-draft">
  <div class="col-log" id="colLog">
    <div class="col-hdr"><span class="col-hdr-title">Draft Log</span><span class="col-hdr-badge" id="logBadge">0/161</span></div>
    <div class="log-toolbar"><input class="log-search" id="logSearch" placeholder="Search picks..." oninput="renderLog()"></div>
    <div class="log-scroll" id="logScroll" style="flex:0 0 auto;max-height:40%;overflow-y:auto;"></div>
    <div class="fall-risk-hdr" style="flex-shrink:0;"><span class="fr-title">Fall Risk Monitor</span><span class="fr-sub" id="fallRiskSub"></span></div>
    <div class="fall-risk-list" id="fallRiskList" style="flex:1;overflow-y:auto;"></div>
  </div>
  <div class="drag-handle" id="dragLog"></div>

  <div class="col-players" id="colPlayers">
    <div class="center-body">
    <div class="players-pane">
    <div class="players-toolbar">
      <button class="pos-btn on" onclick="filterPos('ALL',this)">All</button>
      <button class="pos-btn" onclick="filterPos('C',this)">C</button>
      <button class="pos-btn" onclick="filterPos('1B',this)">1B</button>
      <button class="pos-btn" onclick="filterPos('2B',this)">2B</button>
      <button class="pos-btn" onclick="filterPos('3B',this)">3B</button>
      <button class="pos-btn" onclick="filterPos('SS',this)">SS</button>
      <button class="pos-btn" onclick="filterPos('OF',this)">OF</button>
      <button class="pos-btn" onclick="filterPos('SP',this)">SP</button>
      <button class="pos-btn" onclick="filterPos('RP',this)">RP</button>
      <button class="show-taken-btn" id="showRookieBtn" onclick="toggleRookieFilter()" style="color:var(--green);">üå± Rookies</button>
      <button class="show-taken-btn" id="showTakenBtn" onclick="toggleShowTaken()">Show Taken</button>
      <input class="search-box" id="searchBox" placeholder="Search player..." oninput="renderPlayers()">
      <span class="avail-count" id="availCount">‚Äî</span>
    </div>
    <div class="players-head">
      <span class="ph">#</span>
      <span class="ph s" data-col="name" onclick="setSort('name')">Player</span>
      <span class="ph">Pos</span>
      <span class="ph s" data-col="stat1" onclick="setSort('stat1')">HR/W</span>
      <span class="ph s" data-col="stat2" onclick="setSort('stat2')">R/SV</span>
      <span class="ph s" data-col="stat3" onclick="setSort('stat3')">RBI/K</span>
      <span class="ph s" data-col="stat4" onclick="setSort('stat4')">AVG/ERA</span>
      <span class="ph s" data-col="stat5" onclick="setSort('stat5')">SB/WHIP</span>
      <span class="ph s" data-col="ops" onclick="setSort('ops')">OPS/K</span>
      <span class="ph s asc" data-col="adp" onclick="setSort('adp')">ADP</span>
    </div>
    <div class="players-list" id="playersList"><div id="vsTotal" style="position:relative;width:100%;"></div></div>
    </div>
    <div class="strategy-pane" id="strategyPane">
      <div class="strat-hdr">
        <span class="strat-hdr-title">üìã Live Strategy</span>
        <span style="font-size:9px;color:var(--label);cursor:pointer" onclick="toggleStratPane()">‚ü© hide</span>
      </div>
      <div class="strat-scroll" id="stratScroll"><div id="stratContent"></div></div>
    </div>
    </div>
  </div>
  <div class="drag-handle" id="dragRight"></div>

  <div class="col-right" id="colRight">
    <button class="collapse-right-btn" id="collapseRightBtn" onclick="toggleRightPanel()" title="Hide">‚ü©</button>
    <div style="flex-shrink:0;border-bottom:1px solid var(--border);">
      <div class="col-hdr"><span class="col-hdr-title">Live Roto Standings</span></div>
      <div class="st-head"><span>#</span><span>Owner</span><span>HR</span><span>R</span><span>SV</span><span>ERA</span><span style="text-align:right">Pts</span></div>
      <div id="standingsTable"></div>
    </div>
    <div class="needs-section">
      <div class="needs-label">‚ö† Your Roster Needs</div>
      <div class="needs-detail" id="needsDetail"></div>
    </div>
  </div>
</div>

<div class="view" id="view-teams"><div class="teams-scroll-wrap" id="teamsColsWrap"></div></div>

<div class="view" id="view-roto">
  <div class="roto-toolbar">
    <span style="font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--label);">Detailed Roto Standings</span>
    <span style="font-size:11px;color:var(--sub);">Scores computed live from picks logged</span>
  </div>
  <div class="roto-scroll" id="rotoScroll"></div>
</div>

<div class="view" id="view-multi">
  <div class="multi-toolbar">
    <button class="pos-btn on" onclick="multiFilter('ALL',this)">All</button>
    <button class="pos-btn" onclick="multiFilter('C',this)">C</button>
    <button class="pos-btn" onclick="multiFilter('1B',this)">1B</button>
    <button class="pos-btn" onclick="multiFilter('2B',this)">2B</button>
    <button class="pos-btn" onclick="multiFilter('3B',this)">3B</button>
    <button class="pos-btn" onclick="multiFilter('SS',this)">SS</button>
    <button class="pos-btn" onclick="multiFilter('OF',this)">OF</button>
    <button class="pos-btn" onclick="multiFilter('SP',this)">SP</button>
    <button class="pos-btn" onclick="multiFilter('RP',this)">RP</button>
    <input class="multi-search" id="multiSearch" placeholder="Search player..." oninput="renderMultiRankings()">
  </div>
  <div class="mr-wrap">
    <div class="mr-note">‚Ñπ ESPN, CBS &amp; MLB rankings are algorithmically estimated from consensus ADP.</div>
    <div class="mr-grid" id="multiRankGrid"></div>
  </div>
</div>

<div class="view" id="view-strategy" style="flex-direction:column;overflow-y:auto;padding:20px;gap:14px;">
  <div style="flex-shrink:0;">
    <div style="font-size:13px;font-weight:900;letter-spacing:2px;text-transform:uppercase;color:var(--text);margin-bottom:3px;">‚ôü Draft Strategy</div>
    <div style="font-size:11px;color:var(--sub);">Choose your approach ‚Äî this shapes every pick recommendation</div>
  </div>
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;flex-shrink:0;">
    <div class="sc-card" id="sc-balanced" onclick="selectStrategy('balanced')"><div class="sc-stripe sc-stripe-blue"></div><div class="sc-icon">‚öñÔ∏è</div><div class="sc-name" style="color:var(--blue);">Balanced</div><div class="sc-desc">Compete in all 8 categories. No intentional weaknesses.</div></div>
    <div class="sc-card sc-selected" id="sc-punt" onclick="selectStrategy('punt')"><div class="sc-stripe sc-stripe-red"></div><div class="sc-badge-sel" id="sc-sel-punt">‚úì SELECTED</div><div class="sc-icon">üö´</div><div class="sc-name" style="color:var(--red);">Punt Saves</div><div class="sc-desc">Ignore closers entirely. Dominates other 7.</div></div>
    <div class="sc-card" id="sc-svheavy" onclick="selectStrategy('svheavy')"><div class="sc-stripe sc-stripe-gold"></div><div class="sc-icon">üîí</div><div class="sc-name" style="color:var(--gold);">Saves Heavy</div><div class="sc-desc">Target 3‚Äì4 elite closers in rounds 4‚Äì8.</div></div>
  </div>
  <div class="sc-panel" style="flex-shrink:0;"><div class="sc-panel-title" id="sc-math-title">üìê 7-Team Punt Saves Math ‚Äî Why It Works Here</div><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;" id="sc-math-grid"></div></div>
  <div class="sc-panel" style="flex-shrink:0;"><div class="sc-panel-title" id="sc-guide-title">üó∫ Punt Saves ‚Äî Round-by-Round Target Guide</div><div style="display:flex;flex-direction:column;gap:5px;" id="sc-guide-rows"></div></div>
  <div style="text-align:center;padding:6px 0 4px;flex-shrink:0;"><button onclick="lockStrategyAndGoMock()" style="background:var(--red);color:#fff;border:none;padding:11px 32px;font-size:12px;font-weight:800;letter-spacing:1.5px;text-transform:uppercase;border-radius:5px;cursor:pointer;font-family:'Outfit',sans-serif;transition:background .15s;">‚úì Lock In Strategy</button></div>
</div>

<div class="view" id="view-keepers" style="flex-direction:column;overflow-y:auto;padding:20px;gap:16px;">
  <div style="flex-shrink:0;display:flex;align-items:center;justify-content:space-between;">
    <div><div style="font-size:13px;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--text);">üîí Keeper Management</div><div style="font-size:12px;color:var(--sub);margin-top:3px;">Update keeper selections for any team</div></div>
    <div id="keeperStatusBadge" style="font-size:11px;font-weight:700;padding:6px 14px;border-radius:20px;background:var(--gold-dim);color:var(--gold2);border:1px solid rgba(158,94,12,.2);">Loading...</div>
  </div>
  <div style="flex-shrink:0;background:var(--surface);border-radius:8px;border:1px solid var(--border);padding:14px 18px;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><span style="font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--label);">League Keeper Progress</span><span id="keeperProgressText" style="font-size:11px;font-weight:800;color:var(--text);">0 / 14 confirmed</span></div>
    <div style="height:8px;background:var(--border);border-radius:4px;overflow:hidden;"><div id="keeperProgressBar" style="height:100%;background:var(--green);border-radius:4px;transition:width .4s;width:0%;"></div></div>
  </div>
  <div id="keeperGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:14px;flex-shrink:0;"></div>
</div>

<div class="view" id="view-export" style="flex-direction:column;padding:20px;gap:16px;overflow-y:auto;">
  <div style="display:flex;align-items:center;justify-content:space-between;flex-shrink:0;">
    <div><div style="font-size:13px;font-weight:800;letter-spacing:2px;text-transform:uppercase;color:var(--text);">üìã Ask Claude</div><div style="font-size:12px;color:var(--sub);margin-top:3px;">Copy this text and paste it into Claude to get pick advice</div></div>
    <button onclick="copyClaudeExport()" id="copyExportBtn" style="background:var(--red);color:#fff;border:none;padding:9px 20px;font-size:12px;font-weight:800;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;letter-spacing:1px;text-transform:uppercase;transition:background .15s;">‚éò Copy All</button>
  </div>
  <textarea id="claudeExportBox" readonly style="flex:1;min-height:520px;background:var(--card2);border:1.5px solid var(--border2);color:var(--text);font-family:'Courier New',monospace;font-size:12px;line-height:1.6;padding:16px;border-radius:6px;resize:none;outline:none;white-space:pre;overflow:auto;"></textarea>
  <div style="font-size:10.5px;color:var(--label);text-align:center;flex-shrink:0;">Updates automatically every time you switch to this tab</div>
</div>

<div class="log-bar">
  <span class="lb-label">Log Pick:</span>
  <select class="lb-owner" id="lbOwner">
    <option>Bubs</option><option>Furman</option><option selected>Quickster ‚≠ê</option>
    <option>Cone</option><option>Vic</option><option>TK</option><option>Rich</option>
  </select>
  <div class="lb-wrap">
    <input class="lb-input" id="lbInput" placeholder="Start typing player name..." autocomplete="off">
    <div class="ac-dropdown" id="acDropdown"></div>
  </div>
  <button class="lb-log-btn" onclick="submitPick()">Log Pick ‚Üµ</button>
  <button class="lb-undo-btn" onclick="undoPick()">‚ü≤ Undo</button>
  <div class="lb-rd-info"><div class="lb-rd-label" id="lbRd">Round 1 of 23</div><div class="lb-rd-val">Pick <span class="gold" id="lbPk">1</span> of 161</div></div>
</div>

<div class="modal-overlay hidden" id="playerModal" onclick="closeModal(event)"><div class="modal" id="modalContent"></div></div>

<div class="confirm-overlay hidden" id="confirmOverlay">
  <div class="confirm-box">
    <div class="confirm-title">Confirm Pick</div><div class="confirm-msg" id="confirmMsg"></div>
    <div class="confirm-btns"><button class="confirm-yes" onclick="confirmYes()">‚úì Confirm</button><button class="confirm-no" onclick="confirmNo()">Cancel</button></div>
  </div>
</div>

<div class="confirm-overlay hidden" id="tokenOverlay">
  <div class="confirm-box" style="width:420px;">
    <div class="confirm-title" style="color:var(--blue);">‚òÅÔ∏è Enable Cloud Sync</div>
    <div class="confirm-msg" style="text-align:left;">
      To permanently sync your draft board across devices, paste your GitHub Personal Access Token (PAT).<br><br>
      <input type="password" id="ghTokenInput" placeholder="ghp_..." style="width:100%;padding:10px;border-radius:5px;border:1px solid var(--border);font-family:monospace;font-size:14px;background:var(--surface);color:var(--text);">
    </div>
    <div class="confirm-btns">
      <button class="confirm-yes" style="background:var(--blue);" onclick="saveToken()">Enable Sync</button>
      <button class="confirm-no" onclick="skipToken()">Local Only</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 1. DATA (PASTE YOUR MASSIVE ARRAYS HERE)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PLAYER_DB = [];  // Will be loaded from player_database.json

// Load player data from external JSON file
async function loadPlayerDatabase() {
  try {
    const response = await fetch('player_database.json');
    if (!response.ok) {
      console.error('Failed to load player database');
      return;
    }
    const players = await response.json();
    PLAYER_DB.push(...players);
    console.log(`‚úì Loaded ${PLAYER_DB.length} players from database`);
  } catch (error) {
    console.error('Error loading player database:', error);
  }
}

const DRAFT_PICKS = [];  // Will be loaded from draft_picks.json

// Load draft picks structure from external JSON file
async function loadDraftPicks() {
  try {
    const response = await fetch('draft_picks.json');
    if (!response.ok) {
      console.error('Failed to load draft picks structure');
      return;
    }
    const picks = await response.json();
    DRAFT_PICKS.push(...picks);
    console.log(`‚úì Loaded ${DRAFT_PICKS.length} draft pick slots`);
  } catch (error) {
    console.error('Error loading draft picks:', error);
  }
}

const OWNERS = ['Bubs','Furman','Quickster','Cone','Vic','TK','Rich'];
const YOU = 'Quickster';

const STANDINGS_DATA = [
  {owner:'Furman', scores:[7,7,7,7,6,6,6,6]},
  {owner:'Bubs', scores:[5,4,5,4,7,7,7,7]},
  {owner:'Quickster', scores:[6,6,6,6,5,5,5,5]},
  {owner:'Cone', scores:[4,5,4,5,4,4,4,4]},
  {owner:'Vic', scores:[3,3,3,3,3,3,3,3]},
  {owner:'TK', scores:[2,2,2,2,2,2,2,2]},
  {owner:'Rich', scores:[1,1,1,1,1,1,1,1]}
];

const KEEPERS_INIT = {
  Bubs:['TBD','TBD'],
  Furman:['Brice Turang','Jeremy Pe√±a'],
  Quickster:['TBD','TBD'],
  Cone:['Eugenio Suarez','James Wood'],
  Vic:['TBD','TBD'],
  TK:['Cal Raleigh','Pete Crow-Armstrong'],
  Rich:['Junior Caminero','']
};

let ALL_PLAYERS = JSON.parse(JSON.stringify(PLAYER_DB));

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 2. BULLETPROOF CLOUD STORAGE ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let state = {
  picks: [],
  keepers: JSON.parse(JSON.stringify(KEEPERS_INIT)),
  rotoScores: {}
};

const STORAGE = {
  config: { owner: 'msvoboda27', repo: 'reddevils2026', file: 'draft-data.json' },
  token: localStorage.getItem('rd_github_token') || '',
  saving: false,
  pendingSave: false,
  
  async load() {
    // A) Load Local Data immediately
    const local = localStorage.getItem('rd26_state');
    if (local) {
      try { state = JSON.parse(local); } catch(e){}
    }
    
    // B) Fetch from GitHub silently in background
    if (this.token) {
      updateSaveDot('syncing');
      try {
        // Cache buster ?t=Date.now() prevents 404s/stale reads 
        const res = await fetch(`https://api.github.com/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.file}?t=${Date.now()}`, {
          headers: { 'Authorization': `token ${this.token}`, 'Accept': 'application/vnd.github.v3+json' }
        });
        if (res.ok) {
          const data = await res.json();
          // Decode safely bypassing DOM Unicode Exception
          const content = decodeURIComponent(escape(atob(data.content)));
          const remoteState = JSON.parse(content);
          
          // Conflict resolve: Keep latest data (based on picks array length)
          if (!state.picks || remoteState.picks.length >= state.picks.length) {
             state = remoteState;
             localStorage.setItem('rd26_state', JSON.stringify(state));
          }
          updateSaveDot('saved');
        } else if (res.status === 404) {
          updateSaveDot('saved'); // File doesn't exist yet, clean slate is totally fine
        } else {
          updateSaveDot('error');
        }
      } catch (e) {
        console.error("Cloud load failed", e);
        updateSaveDot('error');
      }
    } else {
      updateSaveDot('local only');
    }
  },

  async save() {
    // 1. Instant local persistence
    localStorage.setItem('rd26_state', JSON.stringify(state));
    
    if (!this.token) {
      updateSaveDot('local only');
      return;
    }
    
    updateSaveDot('syncing');
    
    // 2. Queue logic to prevent 409/422 overlapping requests
    if (this.saving) {
       this.pendingSave = true;
       return;
    }
    this.saving = true;
    
    try {
      // 3. ALWAYS GET THE LATEST SHA IMMEDIATELY BEFORE PUT TO AVOID 422!
      let currentSha = null;
      const getRes = await fetch(`https://api.github.com/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.file}?t=${Date.now()}`, {
        headers: { 'Authorization': `token ${this.token}`, 'Accept': 'application/vnd.github.v3+json' }
      });
      
      if (getRes.ok) {
        currentSha = (await getRes.json()).sha;
      }
      
      // Safely encode specific unicode characters (like Pe√±a) to Base64
      const contentStr = JSON.stringify(state, null, 2);
      const encoded = btoa(unescape(encodeURIComponent(contentStr)));
      
      const body = { message: 'Auto-save draft state', content: encoded };
      if (currentSha) body.sha = currentSha; 
      
      // Omit `branch` deliberately so GitHub automatically routes to Default Branch
      const putRes = await fetch(`https://api.github.com/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.file}`, {
        method: 'PUT',
        headers: { 'Authorization': `token ${this.token}`, 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      });
      
      if (putRes.ok) {
        updateSaveDot('saved');
      } else {
        console.error("GitHub Save Error:", await putRes.json());
        updateSaveDot('error');
      }
    } catch(e) {
       console.error("GitHub Save Exception:", e);
       updateSaveDot('error');
    } finally {
       this.saving = false;
       if (this.pendingSave) {
          this.pendingSave = false;
          setTimeout(() => this.save(), 1000); 
       }
    }
  }
};

function saveState() {
  STORAGE.save();
}

function updateSaveDot(status) {
  const el = document.getElementById('saveIndicator');
  if(!el) return;
  if (status === 'saved') {
    el.className = 'save-dot saved';
    el.innerHTML = '‚óè Cloud Synced';
    el.style.color = 'var(--green)';
  } else if (status === 'syncing') {
    el.className = 'save-dot';
    el.innerHTML = '‚Üª Syncing...';
    el.style.color = 'var(--gold2)';
  } else if (status === 'local only') {
    el.className = 'save-dot';
    el.innerHTML = '‚óè Local Only';
    el.style.color = 'var(--sub)';
  } else {
    el.className = 'save-dot';
    el.innerHTML = '‚ö† Sync Error';
    el.style.color = 'var(--red)';
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 3. UI/APP LOGIC (Perfectly identical to your working v11)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showTokenSetup() {
  document.getElementById('tokenOverlay').classList.remove('hidden');
}

function promptForToken() {
  showTokenSetup();
}

async function saveToken() {
  const input = document.getElementById('ghTokenInput');
  if (input && input.value.trim().startsWith('ghp_')) {
    const t = input.value.trim();
    localStorage.setItem('rd_github_token', t);
    STORAGE.token = t;
    document.getElementById('tokenOverlay').classList.add('hidden');
    const syncBtn = document.getElementById('syncBtn');
    if (syncBtn) syncBtn.style.display = 'none';
    
    // Load first in case setting up a secondary device (Laptop) to pull down changes
    await STORAGE.load();
    renderAll();
    STORAGE.save(); // Prime the file
    showToast('‚òÅÔ∏è Cloud Sync Activated');
  } else {
    alert("Token must start with 'ghp_'");
  }
}

function skipToken() {
  document.getElementById('tokenOverlay').classList.add('hidden');
  showToast('Operating in Local-Only mode');
}

// Init procedure
function _appInit(){
  if(window._appInitDone) return;
  window._appInitDone=true;
  
  if(!state || !state.rotoScores || Object.keys(state.rotoScores).length===0) {
     state.rotoScores=JSON.parse(JSON.stringify(STANDINGS_DATA.reduce((acc,d)=>{acc[d.owner]=[...d.scores];return acc},{})));
  }

  renderAll();
  initAutocomplete();
  initDragResize();
  checkLiveStatus();
  setInterval(checkLiveStatus,15000);
}

document.addEventListener('DOMContentLoaded', async () => {
  // Load data asynchronously to prevent UI blocks
  await STORAGE.load();
  
  if(window.Chart) _appInit();
  else setTimeout(_appInit, 2000);

  const syncBtn = document.getElementById('syncBtn');
  if (STORAGE.token && syncBtn) syncBtn.style.display = 'none';
  if (!STORAGE.token) showTokenSetup();
});

// Toast Notifier
function showToast(msg) {
  const t = document.getElementById('toast');
  if(t) {
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'), 2500);
  }
}

// Resets
function showResetConfirm(){
  const overlay=document.createElement('div');
  overlay.className='confirm-overlay';
  overlay.innerHTML=`<div class="confirm-box" style="border-color:var(--red);">
      <div class="confirm-title" style="color:var(--red);">‚ö† DANGER ZONE</div>
      <div class="confirm-msg">This will instantly wipe the cloud and local storage.<br>What do you want to reset?</div>
      <div class="confirm-btns" style="flex-wrap:wrap;gap:8px;">
        <button onclick="resetPicksOnly();this.closest('div[style]').remove();" style="background:var(--gold-b);color:#fff;border:none;padding:10px 20px;font-weight:800;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;">Picks Only</button>
        <button onclick="resetAll();this.closest('div[style]').remove();" style="background:var(--red);color:#fff;border:none;padding:10px 20px;font-weight:800;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;">Full Reset (incl. keepers)</button>
        <button onclick="this.closest('div[style]').remove();" style="background:transparent;color:var(--label);border:1.5px solid var(--border2);padding:10px 20px;font-size:13px;cursor:pointer;border-radius:5px;font-family:'Outfit',sans-serif;">Cancel</button>
      </div>
    </div>`;
  document.body.appendChild(overlay);
}

function resetPicksOnly(){
  state.picks=[];
  saveState();
  renderAll();
  showToast('‚úì All picks cleared');
}
function resetAll(){
  state={picks:[],keepers:JSON.parse(JSON.stringify(KEEPERS_INIT)),rotoScores:{}};
  saveState();
  renderAll();
  showToast('‚úì Full reset complete');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REMAINDER OF APP LOGIC (Paste identical Helpers, Rendering, 
// Modals, and Chart setups from RedDevils2026_v11_WORKING.html)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// Helpers
function getPlayerByName(name){ const n=name.trim().toLowerCase(); return ALL_PLAYERS.find(p=>p.name.toLowerCase()===n)||null; } 
function getTakenNames(){ const s=new Set(); state.picks.forEach(p=>s.add(p.playerName.toLowerCase())); Object.values(state.keepers||{}).forEach(arr=>arr.forEach(k=>{if(k&&k!=='TBD')s.add(k.toLowerCase());})); return s; } 
function getCurrentPickIndex(){return state.picks.length;} 
function getCurrentPick(){return DRAFT_PICKS[getCurrentPickIndex()]||null;} 
function getNextYourPick(){ const idx=getCurrentPickIndex(); for(let i=idx;i<DRAFT_PICKS.length;i++){if(DRAFT_PICKS[i].owner===YOU)return DRAFT_PICKS[i];} return null; } 
function getYourPicks(){return state.picks.filter(p=>p.owner===YOU);} 
function getPicksForOwner(owner){return state.picks.filter(p=>p.owner===owner);} 
function setText(id,v){const e=document.getElementById(id);if(e)e.textContent=v;} 
function getPosClass(pos){ if(!pos) return ''; const p=pos.toUpperCase(); if(p.startsWith('SP')) return 'pos-sp'; if(p.startsWith('RP')) return 'pos-rp'; if(p.startsWith('OF')) return 'pos-of'; if(p==='C') return 'pos-c'; if(p.startsWith('SS')) return 'pos-ss'; if(p.startsWith('2B')) return 'pos-2b'; if(p.startsWith('3B')) return 'pos-3b'; if(p.startsWith('1B')) return 'pos-1b'; return 'pos-dh'; } 
function posMatchesFilter(pos,filt){ if(!filt||filt==='ALL') return true; const p=(pos||'').toUpperCase(); if(filt==='SP') return p.startsWith('SP'); if(filt==='RP') return p.startsWith('RP'); if(filt==='OF') return p.startsWith('OF'); if(filt==='C') return p==='C'; return p.startsWith(filt); }

// Sort
let sortCol='adp',sortDir=1; 
function setSort(col){ if(sortCol===col) sortDir*=-1; else{sortCol=col;sortDir=col==='adp'?1:-1;} renderPlayers(); } 
function getSortVal(p,col){ const isPit=p.pos&&(p.pos.startsWith('SP')||p.pos.startsWith('RP')||(p.sv&&p.sv>5)); switch(col){ case 'adp': return p.adp||9999; case 'stat1': return isPit?(p.w||0):(p.hr||0); case 'stat2': return isPit?(p.sv||0):(p.r||0); case 'stat3': return isPit?(p.k||0):(p.rbi||0); case 'stat4': return isPit?-(p.era||99):(p.avg||0); case 'stat5': return isPit?-(p.whip||99):(p.sb||0); case 'ops': return isPit?(p.k||0):(p.ops||0); default: return p[col]||0;} }

// Header Update
function updateHeader(){
  const cur=getCurrentPick();
  const nxt=getNextYourPick();
  const taken=getTakenNames();
  setText('hsPick',cur?`${cur.overall} of 161`:'Done');
  setText('hsRound',cur?cur.round:'‚Äî');
  setText('hsClock',cur?cur.owner:'‚Äî');
  const d=document.getElementById('hsClock')?.parentElement;
  if(d) d.className=cur?.owner===YOU?'h-stat active yours':'h-stat active';
  setText('hsDeck',DRAFT_PICKS[getCurrentPickIndex()+1]?.owner||'‚Äî');
  setText('hsNext',nxt?`Pick ${nxt.overall} (R${nxt.round})`:'‚Äî');
  
  const b=document.getElementById('yourTurnBadge');
  if(b) b.style.display=cur?.owner===YOU?'block':'none';
  
  setText('tickPick',cur?`${cur.overall} of 161`:'Done');
  setText('tickRound',cur?cur.round:'‚Äî');
  setText('tickClock',cur?cur.owner:'‚Äî');
  setText('tickDeck',DRAFT_PICKS[getCurrentPickIndex()+1]?.owner||'‚Äî');
  setText('tickNext',nxt?`Pick ${nxt.overall}`:'‚Äî');
  
  let avail=ALL_PLAYERS.filter(p=>!taken.has(p.name.toLowerCase()));
  setText('tickAvail',`${avail.length} players`);
  
  let risk=0;
  if(nxt){ const away=nxt.overall-(cur?cur.overall:DRAFT_PICKS.length); if(away<=9) risk=avail.slice(0,3).length; }
  setText('tickRisk',risk>0?`${risk} top targets`:'Safe');
  
  const lb=document.getElementById('lbOwner');
  if(lb&&cur) lb.value=cur.owner===YOU?'Quickster ‚≠ê':cur.owner;
  setText('lbRd',cur?`Round ${cur.round} of 23`:'Complete');
  setText('lbPk',cur?cur.overall:'‚Äî');
}

// Keeper Actions (Integrated)
let _kpActiveInput=null, _kpActiveIdx=-1;
function renderKeepersView(){
  const OWNER_ORDER_KP = ['Bubs','Furman','Quickster','Cone','Vic','TK','Rich'];
  const OWNER_META = { Bubs: {full:'Bubs', champ:'üèÜ 2019', pick:1}, Furman: {full:'Furman (Tom)', champ:'No titles', pick:2}, Quickster:{full:'Quickster (You)',champ:'üèÜüèÜ 2020-21',pick:3}, Cone: {full:'Cone (Holm)', champ:'üèÜüèÜ 2023-24',pick:4}, Vic: {full:'Vic (Kyle)', champ:'üèÜüèÜ 2017-18',pick:5}, TK: {full:'TK', champ:'üèÜüèÜüèÜ 15,16,22',pick:6}, Rich: {full:'Rich', champ:'üèÜ 2025', pick:7} };
  let confirmed=0,total=14;
  const html = OWNER_ORDER_KP.map(owner => {
    const slots = state.keepers[owner]||['TBD','TBD'];
    const k1 = slots[0], k2 = slots[1];
    const filled1 = k1&&k1!=='TBD', filled2 = k2&&k2!=='TBD';
    if(filled1) confirmed++; if(filled2) confirmed++;
    let badgeClass = (filled1&&filled2) ? 'kp-badge-done' : (filled1||filled2) ? 'kp-badge-partial' : 'kp-badge-tbd';
    let badgeText = (filled1&&filled2) ? '‚úì LOCKED' : (filled1||filled2) ? '1/2 SET' : 'TBD';
    let cardClass = (filled1&&filled2) ? 'kp-complete' : (filled1||filled2) ? 'kp-partial' : '';
    if(owner===YOU) { badgeClass='kp-badge-mine'; badgeText='YOUR KEEPERS'; cardClass='kp-mine'; }
    const p1 = filled1 ? getPlayerByName(k1) : null; const p2 = filled2 ? getPlayerByName(k2) : null;
    const pos1 = p1 ? `<span class="kp-pos-tag ${getPosClass(p1.pos)}">${p1.pos}</span>` : '';
    const pos2 = p2 ? `<span class="kp-pos-tag ${getPosClass(p2.pos)}">${p2.pos}</span>` : '';
    
    return `<div class="kp-card ${cardClass}" id="kp-card-${owner}">
      <div class="kp-hdr">
        <div class="kp-owner"><div>${OWNER_META[owner].full} <span style="color:var(--label);font-weight:400;font-size:10px;">¬∑ Pick #${OWNER_META[owner].pick}</span></div><div class="kp-champ" style="color:var(--sub);font-weight:500;">${OWNER_META[owner].champ}</div></div>
        <span class="kp-badge ${badgeClass}">${badgeText}</span>
      </div>
      <div class="kp-slots">
        <div class="kp-slot"><span class="kp-slot-label">K1${pos1}</span><div class="kp-input-wrap">
          <input class="kp-input ${filled1?'kp-filled':''}" id="kp-${owner}-0" value="${filled1 ? k1 : ''}" placeholder="Search player..." autocomplete="off" oninput="kpOnInput(this,'${owner}',0)" onkeydown="kpOnKey(event,'${owner}',0)" onblur="kpOnBlur('${owner}',0)" onfocus="kpOnFocus(this,'${owner}',0)">
          <div class="kp-suggestions" id="kp-sug-${owner}-0" style="display:none;"></div>
        </div></div>
        <div class="kp-slot"><span class="kp-slot-label">K2${pos2}</span><div class="kp-input-wrap">
          <input class="kp-input ${filled2?'kp-filled':''}" id="kp-${owner}-1" value="${filled2 ? k2 : ''}" placeholder="Search player..." autocomplete="off" oninput="kpOnInput(this,'${owner}',1)" onkeydown="kpOnKey(event,'${owner}',1)" onblur="kpOnBlur('${owner}',1)" onfocus="kpOnFocus(this,'${owner}',1)">
          <div class="kp-suggestions" id="kp-sug-${owner}-1" style="display:none;"></div>
        </div></div>
        <button class="kp-save-btn" onclick="kpSave('${owner}')">Save ${OWNER_META[owner].full.split(' ')[0]}'s Keepers</button>
      </div></div>`;
  }).join('');
  
  const pct = Math.round((confirmed/total)*100);
  if(document.getElementById('keeperProgressBar')) document.getElementById('keeperProgressBar').style.width = pct+'%';
  if(document.getElementById('keeperProgressText')) document.getElementById('keeperProgressText').textContent = confirmed+' / '+total+' confirmed';
  const badge = document.getElementById('keeperStatusBadge');
  if(badge){
    const missing = (total - confirmed) / 2;
    badge.textContent = confirmed===total ? '‚úÖ All Set' : missing+' team'+(missing===1?'':'s')+' TBD';
    badge.style.background = confirmed===total ? 'var(--green-dim)' : 'var(--gold-dim)';
    badge.style.color = confirmed===total ? 'var(--green)' : 'var(--gold2)';
  }
  if(document.getElementById('keeperGrid')) document.getElementById('keeperGrid').innerHTML = html;
}

function kpGetSuggestions(query, owner, slot){
  if(!query || query.length < 2) return [];
  const q = query.toLowerCase();
  const taken = new Set();
  const takenOwnerMap = {};
  Object.entries(state.keepers||{}).forEach(([o,slots])=>{
    slots.forEach((k,i)=>{
      if(k && k!=='TBD'){ if(o===owner && i===slot) return; taken.add(k.toLowerCase()); takenOwnerMap[k.toLowerCase()] = o; }
    });
  });
  return ALL_PLAYERS.filter(p=>p.name.toLowerCase().includes(q)).slice(0,8).map(p=>{
    const isTaken = taken.has(p.name.toLowerCase());
    return { name: p.name, pos: p.pos, team: p.team, taken: isTaken, owner: isTaken ? takenOwnerMap[p.name.toLowerCase()] : null };
  });
}

function kpShowSuggestions(owner, slot, items){
  const sug = document.getElementById(`kp-sug-${owner}-${slot}`);
  if(!sug) return;
  _kpActiveIdx = -1;
  if(!items.length){ sug.style.display='none'; return; }
  sug.innerHTML = items.map((it,i) => {
    if(it.taken){ return `<div class="kp-sug-item kp-sug-taken"><span class="kp-sug-pos">${it.pos}</span>${it.name}<span class="kp-sug-team">Kept by ${it.owner}</span></div>`; }
    return `<div class="kp-sug-item" data-name="${it.name.replace(/"/g, '&quot;')}" onmousedown="kpSelect('${owner}', ${slot}, this.dataset.name)"><span class="kp-sug-pos">${it.pos}</span>${it.name}<span class="kp-sug-team">${it.team}</span></div>`;
  }).join('');
  sug.style.display='block';
}

function kpOnInput(el, owner, slot){ const q = el.value.trim(); kpShowSuggestions(owner, slot, kpGetSuggestions(q, owner, slot)); el.classList.remove('kp-filled','kp-invalid'); }
function kpOnFocus(el, owner, slot){ _kpActiveInput = {owner, slot}; el.classList.remove('kp-filled'); el.style.color = 'var(--text)'; if(el.value.trim().length >= 2) kpShowSuggestions(owner, slot, kpGetSuggestions(el.value.trim(), owner, slot)); }
function kpOnBlur(owner, slot){ setTimeout(()=>{ const sug = document.getElementById(`kp-sug-${owner}-${slot}`); if(sug) sug.style.display='none'; const input = document.getElementById(`kp-${owner}-${slot}`); if(input && input.value.trim()){ const match = ALL_PLAYERS.find(p=>p.name.toLowerCase()===input.value.trim().toLowerCase()); if(!match){ input.classList.add('kp-invalid'); input.classList.remove('kp-filled'); } } }, 250); }
function kpOnKey(e, owner, slot){
  const sug = document.getElementById(`kp-sug-${owner}-${slot}`);
  if(!sug || sug.style.display==='none') return;
  const items = sug.querySelectorAll('.kp-sug-item');
  if(e.key==='ArrowDown'){ e.preventDefault(); _kpActiveIdx=Math.min(_kpActiveIdx+1,items.length-1); }
  else if(e.key==='ArrowUp'){ e.preventDefault(); _kpActiveIdx=Math.max(_kpActiveIdx-1,0); }
  else if(e.key==='Enter'||e.key==='Tab'){ if(_kpActiveIdx>=0 && items[_kpActiveIdx]){ e.preventDefault(); kpSelect(owner, slot, items[_kpActiveIdx].dataset.name); } return; }
  else if(e.key==='Escape'){ sug.style.display='none'; return; }
  items.forEach((it,i)=>it.classList.toggle('kp-sug-active', i===_kpActiveIdx));
}
function kpSelect(owner, slot, name){ const input = document.getElementById(`kp-${owner}-${slot}`); if(!input) return; input.value = name; input.classList.add('kp-filled'); input.classList.remove('kp-invalid'); document.getElementById(`kp-sug-${owner}-${slot}`).style.display='none'; }
function kpSave(owner){
  const k1Input = document.getElementById(`kp-${owner}-0`), k2Input = document.getElementById(`kp-${owner}-1`);
  const k1 = k1Input ? k1Input.value.trim() : '', k2 = k2Input ? k2Input.value.trim() : '';
  let valid = true;
  [k1Input, k2Input].forEach(inp => { if(inp.value.trim()){ const match = ALL_PLAYERS.find(p=>p.name.toLowerCase()===inp.value.trim().toLowerCase()); if(!match){ inp.classList.add('kp-invalid'); valid=false; } } });
  if(valid) {
    if(!state.keepers) state.keepers={};
    state.keepers[owner] = [k1||'TBD', k2||'TBD'];
    saveState();
    renderAll();
    showToast(`‚úì Saved keepers for ${owner}`);
  } else { showToast('‚ö† Invalid player names'); }
}

// Main Render Hub
function renderAll(){
  updateHeader();
  renderLog();
  renderPlayers(); // triggers virtual scroller
  renderStandings();
  renderNeeds();
  renderFallRisk();
  renderStrategyPanel();
  const active=document.querySelector('.view.active');
  if(active){ if(active.id==='view-teams') renderTeams(); if(active.id==='view-roto') renderRotoDetail(); if(active.id==='view-multi') renderMultiRankings(); if(active.id==='view-keepers') renderKeepersView(); if(active.id==='view-export') renderExport(); }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VIRTUAL SCROLL & COMPONENT RENDERING 
// (Remaining boilerplate UI methods skipped in this snippet to maintain 
// brevity, but your v11 functions seamlessly plug in here).
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

</script>
</body>
</html>